query CalendarEventsQuery($startsAfter: Datetime, $startsBefore: Datetime) {
  events(
    filter: {
      startsAt: { greaterThan: $startsAfter, lessThan: $startsBefore }
      templateName: { isNull: true }
    }
    orderBy: STARTS_AT_ASC
  ) {
    ...CalendarEvent
  }
}

fragment CalendarEvent on Event {
  translations {
    slug
    title
    languageCode
    eventId
  }
  endsAt
  id
  startsAt
}

fragment DetailedEvent on Event {
  translations {
    description
    eventId
    languageCode
    slug
    title
  }
  startsAt
  img {
    src
    srcSetJpeg
    srcSetWebp
    height
    width
  }
  endsAt
  id
  tags {
    tag {
      id
      translations {
        languageCode
        tagId
        title
      }
    }
    eventId
    tagId
  }
  groups {
    group {
      id
      translations {
        groupId
        languageCode
        title
      }
    }
    eventId
    groupId
  }
}

query CalendarEventBySlug($languageCode: String!, $slug: String!) {
  eventBySlug(preferredLanguageCode: $languageCode, slug: $slug) {
    ...DetailedEvent
  }
}

query CalendarEventById($id: BigInt!) {
  event(id: $id) {
    ...DetailedEvent
  }
}

mutation UpsertEvent(
  $data: EventDatumInput!
  $translations: [EventTrDatumInput]!
  $id: BigInt
) {
  upsertEvent(
    input: { data: $data, translations: $translations, eventId: $id }
  ) {
    event {
      ...CalendarEvent
    }
  }
}
